const w=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const m=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const A=window.enmity.modules.common.StyleSheet,H=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const S=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function f(n,l,y){return window.enmity.utilities.findInReactTree(n,l,y)}function E(n){return window.enmity.utilities.wrapInHooks(n)}function P(n){window.enmity.plugins.registerPlugin(n)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const M=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const b=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const C=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio,e.FormRow,e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function L(n){return window.enmity.assets.getIDByName(n)}const u={byProps:(...n)=>window.enmity.modules.filters.byProps(...n),byName:(n,l)=>window.enmity.modules.filters.byName(n,l),byTypeName:(n,l)=>window.enmity.modules.filters.byTypeName(n,l),byDisplayName:(n,l)=>window.enmity.modules.filters.byDisplayName(n,l)};function k(...n){return window.enmity.modules.bulk(...n)}window.enmity.modules.common;function B(n){return window.enmity.patcher.create(n)}var R=m.memo(()=>{const n=A.createThemedStyleSheet({view:{verticalAlign:"center",justifyContent:"center",alignItems:"center",marginLeft:5},lock:{color:H.ThemeColorMap.CHANNELS_DEFAULT}});return m.createElement(C,{style:n.view},m.createElement(S.Svg,{width:16,height:16,viewBox:"0 0 1190.000000 1280.000000"},m.createElement(S.G,{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",stroke:"none",fill:n.lock.color},m.createElement(S.Path,{d:"M5625 11949 c-726 -55 -1331 -308 -1787 -748 -391 -376 -650 -839 -788 -1406 -97 -398 -102 -478 -103 -1607 l-2 -940 -27 -23 c-17 -15 -56 -30 -105 -40 -240 -51 -368 -97 -486 -174 -288 -189 -455 -502 -471 -876 -12 -274 58 -532 188 -696 127 -160 343 -303 531 -353 l58 -16 2 -1556 3 -1556 28 -140 c69 -350 191 -643 373 -907 271 -390 676 -701 1132 -876 493 -190 1060 -232 1606 -119 750 151 1373 601 1764 1233 170 274 282 543 355 864 17 74 18 233 21 1548 l4 1470 62 13 c263 58 513 220 660 428 220 317 291 721 198 1100 -78 320 -269 572 -538 725 -97 53 -225 98 -340 120 -89 18 -93 21 -113 56 -10 17 -14 316 -16 1172 -4 1266 -1 1186 -59 1425 -136 576 -399 1053 -786 1426 -466 448 -1037 707 -1705 757 -133 10 -358 5 -492 -10z m-605 -3150 c99 -14 206 -54 299 -112 67 -42 201 -176 246 -243 116 -175 167 -365 159 -604 -6 -189 -34 -308 -104 -445 -123 -236 -353 -414 -617 -473 -101 -22 -278 -21 -376 1 -388 83 -673 376 -758 760 -25 115 -25 370 0 485 83 372 376 661 749 746 109 24 294 27 402 5z m2117 -3161 c-39 -112 -130 -202 -242 -245 -68 -25 -88 -28 -190 -27 -123 0 -199 23 -283 86 -31 24 -96 94 -145 155 -50 60 -102 116 -115 124 -40 26 -127 47 -185 41 -30 -3 -79 -19 -108 -36 -29 -17 -214 -191 -411 -384 -197 -193 -370 -365 -385 -384 -50 -65 -76 -138 -76 -221 0 -113 57 -224 151 -287 35 -24 94 -55 131 -69 51 -18 87 -21 176 -20 101 0 120 3 184 28 83 34 146 84 263 199 41 40 85 73 108 80 51 15 131 12 180 -8 26 -10 55 -29 67 -42 13 -14 108 -142 214 -286 170 -230 194 -259 254 -298 96 -63 184 -91 309 -99 126 -8 188 4 307 58 203 92 341 229 432 428 23 50 45 91 48 91 4 0 134 -127 289 -283 293 -295 347 -339 435 -360 52 -13 148 -7 185 11 17 8 35 26 40 39 14 36 18 509 4 517 -11 5 -327 325 -707 711 l-686 701 -15 123 c-19 156 -22 356 -8 477 4 37 14 113 22 169 24 163 31 208 31 204 -1 -3 -17 -55 -37 -115z"}))))});const d=B("show-hidden-channels"),[D,v,p,g,N,x,_,V,O]=k(u.byName("BaseChannelItem",!1),u.byProps("getChannelPermissions"),u.byProps("getChannel"),u.byProps("hasUnread"),u.byProps("ChannelRecordBase"),u.byProps("stores","fetchMessages"),u.byName("MessagesConnected",!1),u.byName("MainMembers",!1),u.byProps("getOrCreate")),U={name:"ShowHiddenChannels",version:"2.0.2",description:"Displays all hidden channels which can't be accessed, this won't allow you to read them.",authors:[{name:"eternal",id:"263689920210534400"}],onStart(){var n;this.can=(n=v.can.__original)!=null?n:v.can;const l=this;N.ChannelRecordBase.prototype.isHidden=function(){return![1,3].includes(this.type)&&!l.can(w.Permissions.VIEW_CHANNEL,this)},d.after(v,"can",(c,[i])=>{if(i===w.Permissions.VIEW_CHANNEL)return!0}),d.after(g,"hasUnread",(c,[i],o)=>{var t;return o&&!((t=p.getChannel(i))!=null&&t.isHidden())}),d.after(g,"hasRelevantUnread",(c,[i],o)=>o&&!i.isHidden()),d.after(g,"hasNotableUnread",(c,[i],o)=>{var t;return o&&!((t=p.getChannel(i))!=null&&t.isHidden())}),d.after(g,"hasUnreadPins",(c,[i])=>{if(!p.getChannel(i))return!1}),d.after(g,"getMentionCount",(c,[i],o)=>{var t;return(t=p.getChannel(i))!=null&&t.isHidden()?0:o});const y=d.after(C,"render",(c,i,o)=>{const t=f(o,r=>{var a,s;return((a=r.props)==null?void 0:a.channel)&&((s=r.props)==null?void 0:s.isRulesChannel)!==void 0});!t||(d.after(t.type,"type",(r,[{channel:a}],s)=>{if(!(a!=null&&a.isHidden()))return s;const h=f(s,T=>{var I;return T!==s&&Array.isArray((I=T.props)==null?void 0:I.children)});return h&&h.props.children.push(m.createElement(R,null)),s}),y())}),F=L("nsfw_gate_lock");d.after(V,"default",(c,i,o)=>o&&(o=E(o.type.type)(o.props),o.props.children=(t=>{var r;const{channel:a}=(r=t.props)!=null?r:{},s=E(t.type)(t.props);return a!=null&&a.isHidden()&&(s.props.children.pop(),s.props.children.push(m.createElement(C,{style:{flex:1,alignItems:"center",justifyContent:"center"}},m.createElement(M,{style:{width:75,height:75},source:F})))),s})(o.props.children),o)),d.after(_,"default",(c,[i],o)=>{const t=i.channel;if(!(t!=null&&t.isHidden()))return o;const r=A.createThemedStyleSheet({image:{width:100,height:100,padding:5,marginBottom:15},container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:w.ThemeColorMap.BACKGROUND_PRIMARY},header:{color:w.ThemeColorMap.HEADER_PRIMARY,fontFamily:w.Fonts.PRIMARY_SEMIBOLD,fontWeight:"bold",fontSize:24},description:{color:w.ThemeColorMap.HEADER_SECONDARY,fontSize:16,fontFamily:w.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5,paddingLeft:25,paddingRight:25,paddingTop:5,textAlign:"center"},lastMessage:{marginTop:5}});return m.createElement(C,{style:r.container},m.createElement(M,{style:r.image,source:F}),m.createElement(b,{style:r.header},"This is a hidden channel."),m.createElement(b,{style:r.description},"You cannot see the contents of this channel. However, you may see info by swiping to the right."),m.createElement(b,{style:{...r.description,...r.lastMessage}},"Last Message sent on ",this.parseSnowflake(t.lastMessageId),"."))}),d.after(D,"default",(c,[i],o)=>{var t;const{channel:r}=(t=f(i,s=>s==null?void 0:s.channel))!=null?t:{};if(!(r!=null&&r.isHidden()))return o;const a=f(o,s=>{var h;return s!==o&&Array.isArray((h=s.props)==null?void 0:h.children)});return a&&a.props.children.splice(4,0,m.createElement(R,null)),o}),d.instead(x,"fetchMessages",(c,i,o)=>{var t;const{channelId:r}=i[0],a=p.getChannel(r);if((t=a==null?void 0:a.isHidden)!=null&&t.call(a)){const s=O.getOrCreate(r);s.loadingMore=!1;return}return o.apply(c,i)})},onStop(){delete N.prototype.isHidden,d.unpatchAll()},parseSnowflake(n){try{const l=BigInt(n).toString(2).padStart(64,"0"),y=parseInt(l.substring(0,42),2)+14200704e5;return new Date(y).toLocaleString()}catch(l){return console.error(l),"(Failed to get date)"}}};P(U);
