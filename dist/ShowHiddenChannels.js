const y=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const m=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const M=window.enmity.modules.common.StyleSheet,H=window.enmity.modules.common.ColorMap;window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux;const b=window.enmity.modules.common.SVG;window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function f(o,c,S){return window.enmity.utilities.findInReactTree(o,c,S)}function A(o){return window.enmity.utilities.wrapInHooks(o)}function P(o){window.enmity.plugins.registerPlugin(o)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const E=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const v=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const C=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio,e.FormRow,e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function L(o){return window.enmity.assets.getIDByName(o)}const w={byProps:(...o)=>window.enmity.modules.filters.byProps(...o),byName:(o,c)=>window.enmity.modules.filters.byName(o,c),byTypeName:(o,c)=>window.enmity.modules.filters.byTypeName(o,c),byDisplayName:(o,c)=>window.enmity.modules.filters.byDisplayName(o,c)};function k(...o){return window.enmity.modules.bulk(...o)}window.enmity.modules.common;function D(o){return window.enmity.patcher.create(o)}var N=m.memo(()=>{const o=M.createThemedStyleSheet({view:{verticalAlign:"center",justifyContent:"center",alignItems:"center",marginLeft:5},lock:{color:H.ThemeColorMap.CHANNELS_DEFAULT}});return m.createElement(C,{style:o.view},m.createElement(b.Svg,{width:16,height:16,viewBox:"0 0 1190.000000 1280.000000"},m.createElement(b.G,{transform:"translate(0.000000,1280.000000) scale(0.100000,-0.100000)",stroke:"none",fill:o.lock.color},m.createElement(b.Path,{d:"M5625 11949 c-726 -55 -1331 -308 -1787 -748 -391 -376 -650 -839 -788 -1406 -97 -398 -102 -478 -103 -1607 l-2 -940 -27 -23 c-17 -15 -56 -30 -105 -40 -240 -51 -368 -97 -486 -174 -288 -189 -455 -502 -507 -956 -12 -104 -16 -3002 -4 -3230 21 -421 144 -691 405 -887 61 -46 199 -117 274 -141 77 -26 166 -36 520 -58 356 -22 440 -31 560 -61 471 -116 869 -444 1103 -892 175 -340 261 -681 276 -1084 4 -128 1 -164 -14 -175 -41 -30 -369 -123 -777 -199 -234 -44 -532 -102 -663 -129 -155 -33 -265 -65 -265 -80 0 -6 16 -56 35 -112 166 -501 452 -943 825 -1277 561 -501 1293 -737 2052 -664 801 78 1492 427 1988 996 471 537 733 1200 777 1958 16 265 24 325 50 345 14 11 241 63 504 116 668 135 690 141 690 167 0 12 -7 45 -16 75 -9 30 -36 121 -60 202 -23 82 -42 151 -42 154 0 2 -102 -16 -226 -41 -268 -53 -504 -106 -860 -185 -171 -37 -315 -68 -321 -68 -10 0 -13 64 -13 275 0 382 -36 659 -130 980 -276 939 -1020 1646 -1974 1833 -92 17 -314 46 -430 55 l-60 5 0 878 c0 971 -6 1148 -52 1392 -98 510 -315 960 -638 1333 -379 425 -846 695 -1403 804 -193 37 -495 52 -672 34z m745 -2331 c252 -34 514 -163 694 -338 118 -114 206 -238 286 -400 53 -111 100 -247 129 -375 25 -110 27 -132 32 -408 5 -275 5 -297 -11 -313 -23 -24 -42 -23 -68 1 -19 17 -25 18 -53 6 -40 -17 -104 -14 -156 6 -67 24 -137 91 -166 159 -25 59 -28 77 -28 157 0 68 -5 104 -16 122 -10 15 -31 34 -47 41 -25 11 -30 11 -53 -9 -13 -12 -56 -65 -95 -118 -39 -52 -76 -99 -82 -104 -7 -5 -33 1 -64 15 -26 12 -83 29 -127 38 -76 14 -80 14 -108 -7 -40 -29 -45 -76 -20 -199 25 -120 49 -209 76 -294 33 -106 103 -282 126 -303 6 -6 37 -9 68 -8 57 3 57 3 96 -38 52 -54 51 -73 -7 -108 -29 -18 -58 -32 -64 -32 -6 0 -31 -25 -54 -56 -43 -58 -122 -122 -184 -146 -25 -9 -92 -16 -153 -16 -60 0 -118 -4 -129 -9 -24 -13 -22 -47 5 -71 26 -24 26 -34 -2 -63 -29 -28 -76 -25 -146 8 -54 25 -58 29 -76 83 -19 57 -22 61 -55 64 -79 9 -175 107 -228 231 -19 43 -61 153 -95 245 -94 244 -103 289 -103 548 0 224 0 227 26 246 17 12 40 16 62 13 26 -3 39 -14 62 -55 38 -71 70 -99 113 -99 37 0 97 35 121 69 19 26 19 31 4 74 -8 25 -31 89 -52 143 -56 144 -59 181 -22 239 19 27 60 58 108 80 31 13 52 48 52 86 0 11 -11 49 -25 84 -49 125 -120 308 -120 296 0 -1 50 -8 110 -15z"}))))});const l=D("show-hidden-channels"),[B,F,h,p,R,x,_,U,V]=k(w.byName("BaseChannelItem",!1),w.byProps("getChannelPermissions"),w.byProps("getChannel"),w.byProps("hasUnread"),w.byProps("ChannelRecordBase"),w.byProps("stores","fetchMessages"),w.byName("MessagesConnected",!1),w.byName("MainMembers",!1),w.byProps("getOrCreate")),O={name:"ShowHiddenChannels",version:"2.0.2",description:"Displays all hidden channels which can't be accessed, this won't allow you to read them.",authors:[{name:"eternal",id:"263689920210534400"}],onStart(){var o;this.can=(o=F.can.__original)!=null?o:F.can;const c=this;R.ChannelRecordBase.prototype.isHidden=function(){return![1,3].includes(this.type)&&!c.can(y.Permissions.VIEW_CHANNEL,this)},l.after(F,"can",(d,[r])=>{if(r===y.Permissions.VIEW_CHANNEL)return!0}),l.after(p,"hasUnread",(d,[r],n)=>{var t;return n&&!((t=h.getChannel(r))!=null&&t.isHidden())}),l.after(p,"hasRelevantUnread",(d,[r],n)=>n&&!r.isHidden()),l.after(p,"hasNotableUnread",(d,[r],n)=>{var t;return n&&!((t=h.getChannel(r))!=null&&t.isHidden())}),l.after(p,"hasUnreadPins",(d,[r])=>{if(!h.getChannel(r))return!1}),l.after(p,"getMentionCount",(d,[r],n)=>{var t;return(t=h.getChannel(r))!=null&&t.isHidden()?0:n});const S=l.after(C,"render",(d,r,n)=>{const t=f(n,s=>{var a,i;return((a=s.props)==null?void 0:a.channel)&&((i=s.props)==null?void 0:i.isRulesChannel)!==void 0});!t||(l.after(t.type,"type",(s,[{channel:a}],i)=>{if(!(a!=null&&a.isHidden()))return i;const u=f(i,g=>{var I;return g!==i&&Array.isArray((I=g.props)==null?void 0:I.children)});return u&&u.props.children.push(m.createElement(N,null)),i}),S())}),T=L("nsfw_gate_lock");l.after(U,"default",(d,r,n)=>n&&(n=A(n.type.type)(n.props),n.props.children=(t=>{var s;const{channel:a}=(s=t.props)!=null?s:{},i=A(t.type)(t.props);return a!=null&&a.isHidden()&&(i.props.children.pop(),i.props.children.push(m.createElement(C,{style:{flex:1,alignItems:"center",justifyContent:"center"}},m.createElement(E,{style:{width:75,height:75},source:T})))),i})(n.props.children),n)),l.after(_,"default",(d,[r],n)=>{const t=r.channel;if(!(t!=null&&t.isHidden()))return n;const s=M.createThemedStyleSheet({image:{width:100,height:100,padding:5,marginBottom:15},container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:y.ThemeColorMap.BACKGROUND_PRIMARY},header:{color:y.ThemeColorMap.HEADER_PRIMARY,fontFamily:y.Fonts.PRIMARY_SEMIBOLD,fontWeight:"bold",fontSize:24},description:{color:y.ThemeColorMap.HEADER_SECONDARY,fontSize:16,fontFamily:y.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5,paddingLeft:25,paddingRight:25,paddingTop:5,textAlign:"center"},lastMessage:{marginTop:5}}),a=i=>{try{const u=parseInt(i).toString(2).padStart(64,"0").substring(0,42),g=parseInt(u,2)+14200704e5;return new Date(g).toLocaleString()}catch(u){return console.error(u),"(Failed to get date)"}};return m.createElement(C,{style:s.container},m.createElement(E,{style:s.image,source:T}),m.createElement(v,{style:s.header},"This is a hidden channel."),m.createElement(v,{style:s.description},"You cannot see the contents of this channel. However, you may see info by swiping to the right."),m.createElement(v,{style:{...s.description,...s.lastMessage}},"Last Message sent on ",a(t.lastMessageId),"."))}),l.after(B,"default",(d,[r],n)=>{var t;const{channel:s}=(t=f(r,i=>i==null?void 0:i.channel))!=null?t:{};if(!(s!=null&&s.isHidden()))return n;const a=f(n,i=>{var u;return i!==n&&Array.isArray((u=i.props)==null?void 0:u.children)});return a&&a.props.children.splice(4,0,m.createElement(N,null)),n}),l.instead(x,"fetchMessages",(d,r,n)=>{var t;const{channelId:s}=r[0],a=h.getChannel(s);if((t=a==null?void 0:a.isHidden)!=null&&t.call(a)){const i=V.getOrCreate(s);i.loadingMore=!1;return}return n.apply(d,r)})},onStop(){delete R.prototype.isHidden,l.unpatchAll()}};P(O);
